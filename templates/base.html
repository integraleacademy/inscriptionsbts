<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title or "Int√©grale Academy" }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id=GTM-PKTXJCXF'+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PKTXJCXF');</script>
<!-- End Google Tag Manager -->

  
<script src="https://cdn.brevo.com/js/sdk-loader.js" async></script>
<script>
    // Version: 2.0
    window.Brevo = window.Brevo || [];
    Brevo.push([
        "init",
        {
        client_key: "hfn4584bwis13pkfu5bsaqpx"
        }
    ]);
</script>

  

  
</head>

<body class="{% block body_class %}{% endblock %}">

    <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKTXJCXF"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  
  <!-- üß≠ Nouvelle barre sup√©rieure centr√©e -->
  <header class="topbar new-topbar centered-topbar">
    <div class="datetime" id="datetime"></div>
    <div class="brand-centered">
      <img src="{{ url_for('static', filename='logo-integrale.png') }}" alt="Logo Int√©grale Academy" class="logo-centered">
      <h1>Int√©grale Academy</h1>
    </div>
  </header>

  <!-- ‚úÖ Contenu principal -->
  <main class="{% if 'admin' in request.path or 'parcoursup' in request.path %}admin-full{% elif 'espace' in request.path %}container candidat{% else %}container{% endif %}">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-area">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <!-- ‚ù§Ô∏è Pied de page -->
  <footer class="footer-signature">
    <p>‚ù§Ô∏è Site internet cr√©√© et d√©velopp√© par <strong>Int√©grale Group</strong></p>
  </footer>

  <!-- JS dynamiques -->
  <script>
    // üïí Date et heure en fran√ßais (premi√®re lettre majuscule)
    function updateDateTime() {
      const now = new Date();
      const options = {
        weekday: 'long', day: 'numeric', month: 'long', year: 'numeric',
        hour: '2-digit', minute: '2-digit', second: '2-digit'
      };
      let text = now.toLocaleString('fr-FR', options);
      // Met majuscule √† la premi√®re lettre du jour
      text = text.charAt(0).toUpperCase() + text.slice(1);
      document.getElementById('datetime').textContent = text;
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();
  </script>

  {% if 'admin' in request.path or 'parcoursup' in request.path %}
    <script src="{{ url_for('static', filename='js/main_admin.js') }}"></script>
  {% elif request.path.startswith('/replace-files') %}
    {# Pas de JS front sur cette page #}
  {% else %}
    <script src="{{ url_for('static', filename='js/main_front.js') }}" defer></script>
  {% endif %}
</body>
</html>
